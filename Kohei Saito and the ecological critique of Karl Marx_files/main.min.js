(function() {
"use strict";

var fluidBoxModal = {
	init: function () {

	$(function () {
	    $('.modal-fotos').fluidbox();
	});

	}
};

fluidBoxModal.init();
}(window));

(function() {
"use strict";

var hero = {
	init: function () {
		var $slider = $('.is-slider');

		function slickify(){
		    $slider.slick({
				mobileFirst:true,
		        responsive: [
		            {
		                breakpoint: 300,
		                settings: "unslick"
		            },
		            {
		                breakpoint: 1025,
		                settings: {
							slidesToShow: 1,
							slidesToScroll: 1,		    	
					        autoplay: true,
					        autoplaySpeed: 4000,
					        // delay: 1000,
					        speed: 700,
					        dots: false,
					        arrows: false,
					        fade: true,
			  				asNavFor: '.thumbs__nav'
			  			}
		            }
		        ]
		    });
		    $('.thumbs__nav').slick({
			  slidesToShow: 3,
			  slidesToScroll: 1,
			  asNavFor: '.hero.is-slider',
			  focusOnSelect: true,
			  // variableWidth: true,
			  responsive: [
		            {
		                breakpoint: 1025,
		                settings: "unslick"
		            }
		        ]
			});
		}

		slickify();
		$(window).resize(function(){
		    var $windowWidth = $(window).width();
		    if ($windowWidth > 760) {
		        slickify();
		    }
		});
	}
};

hero.init();
}(window));

(function() {
"use strict";

var togglers = {
	$body: $('body'),
	$header: $('.header'),
	$toggler: $('.toggler'),
	
	init: function () {
		this.bindEvents();
	},

	bindEvents: function() {
		var self = this;
		this.$toggler.on('click', function(e) {
			// e.preventDefault();
			self.onClickedToggler(this);
		});
	},

	onClickedToggler: function(el) {
		if ($(el).hasClass('header__toggle') && this.$body.hasClass('open-menu')) {
			this.closeSection();
		} else if ($(el).hasClass('go-to') && this.$body.hasClass('open-menu')) {
				this.closeSection();
		} else {
			var section = $(el).data('show-section');
			this.openSection(section);
		}
	},

	openSection: function(el) {
		this.$body
			.addClass('open-menu')
			.toggleClass('dark-menu', $(el).hasClass('do-dark-menu'));
		this.$header.addClass('is-active');
		$(el).addClass('is-visible');
	},

	closeSection: function () {
		this.$body
			.removeClass('open-menu')
			.removeClass('dark-menu');
		this.$header.removeClass('is-active');
		$('.is-menu.is-visible').removeClass('is-visible');
	}
};

var fixMenu = {
	init: function () {

		$(window).bind('scroll', function () {
		    if ($(window).scrollTop() > 80) {
		    	$('header.header').addClass('fixed');
				$('.menu.is-menu').addClass('fixed');
		    } else {
		    	$('header.header').removeClass('fixed');
		    	$('.menu.is-menu').removeClass('fixed');
		    }
		});		
	}
};

fixMenu.init();
togglers.init();
}(window));

(function() {
"use strict";

var navBar = {
	init: function () {

	var element = document.documentElement,
		body = document.body,
		scrollTop = 'scrollTop',
		scrollHeight = 'scrollHeight',
		progress = document.querySelector('.progress-bar'),
		scroll;

	document.addEventListener('scroll', function() {
		scroll = (element[scrollTop]||body[scrollTop]) / ((element[scrollHeight]||body[scrollHeight]) - element.clientHeight) * 100;
		progress.style.setProperty('--scroll', scroll + '%');
	}); 

	}
};

navBar.init();
}(window));

(function() {
"use strict";

var scrollPage = {
	init: function () {

		var arrowsDown = $('.spip_note');
		var goDown = $('.go-down');

		arrowsDown.on('click', function() {
		    // On-page links
			if (
				location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') 
				&& 
				location.hostname == this.hostname
			) {
				// Figure out element to scroll to
				var target = $(this.hash);
				target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
				// Does a scroll target exist?
				// event.preventDefault();
				if (target.length) {
				var targetOffset = target.offset().top - 90;
					// Only prevent default if animation is actually gonna happen
					$('html, body').animate({
						scrollTop: targetOffset
					}, 800, function() {
						// Callback after animation
						// Must change focus!
						var $target = $(target);
						// $target.focus();
						if ($target.is(":focus")) { // Checking if the target was focused
							return false;
						} else {
						$target.attr('tabindex','-1'); // Adding tabindex for elements not focusable
						// $target.focus(); // Set focus again
						}
					});
				}
			}
		});

		goDown.on('click', function() {
		    // On-page links
			if (
				location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') 
				&& 
				location.hostname == this.hostname
			) {
				// Figure out element to scroll to
				var target = $(this.hash);
				target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
				// Does a scroll target exist?
				// event.preventDefault();
				if (target.length) {
				var targetOffset = target.offset().top;
					// Only prevent default if animation is actually gonna happen
					$('html, body').animate({
						scrollTop: targetOffset
					}, 800, function() {});
				}
			}
		});		
	}
};

scrollPage.init();
}(window));

(function() {
"use strict";

var scrollBox = {
	init: function () {

		(function($) {

		/**
		* Copyright 2012, Digital Fusion
		* Licensed under the MIT license.
		* http://teamdf.com/jquery-plugins/license/
		*
		* @author Sam Sehnert
		* @desc A small plugin that checks whether elements are within
		*     the user visible viewport of a web browser.
		*     only accounts for vertical position, not horizontal.
		*/

		$.fn.visible = function(partial) {

			var $t            = $(this),
				$w            = $(window),
				viewTop       = $w.scrollTop(),
				viewBottom    = viewTop + $w.height(),
				_top          = $t.offset().top,
				_bottom       = _top + $t.height(),
				compareTop    = partial === true ? _bottom : _top,
				compareBottom = partial === true ? _top : _bottom;

			return ((compareBottom <= viewBottom) && (compareTop >= viewTop));

		};

		})(jQuery);

		var win = $(window);

		var allMods = $(".scrollbox");

		allMods.each(function(i, el) {
			var el = $(el);
			if (el.visible(true)) {
				el.addClass("already-visible"); 
			} 
		});

		// var $waitlist = $('.on-waitlist');    
		// $(window).on("scroll resize", function(event) {
		// 	$waitlist.each(function(i, el) {
		// 		var $el = $waitlist.eq(i);
		// 		if ($el.visible(true)) {
		// 			$waitlist
		// 			.splice(i, 1);
		// 			$el
		// 			.addClass("come-in")
		// 			.removeClass('on-waitlist');
		// 		} 
		// 	});
		// });

		win.scroll(function(event) {

			allMods.each(function(i, el) {
				var el = $(el);
				if (el.visible(true)) {
					el.addClass("come-in"); 
				} 
			});

		});

	}
};

scrollBox.init();
}(window));

function check() {
    if(document.forms["my_form"]["recherche"].value == "")
        document.forms["my_form"]["recherche"].value = " ";

	if(document.forms["my_form1"]["recherche"].value == "")
        document.forms["my_form1"]["recherche"].value = " ";
}

function clear_form_elements(ele) {
    
	$(ele).find(':input').each(function() {
		switch(this.type) {
			case 'search':
				$(this).val(' ');
				break;
		}
	});

	$('input:not(form input)').each(function() {
		switch(this.type) {
			case 'radio':
				this.checked = false;
		}
	});

}

/*Desplegable reproductor de voz*/
$( document ).ready(function() {
$('#lector-boton').on('click', () => {
  $('.reproductor-voz').toggleClass('active');
 
 
})
 
});

function generarAudio(id_article) {
//document.getElementById("reproductorVoz").innerHTML = id_article;
 
fetch('/spip.php?page=mod_articulo_generar_audio&id_article='.concat(id_article), {
  method: 'POST',
  body: id_article // your FormData
})
	.then((response) => {
	  return response.text();
	})
	.then((html) => {
	  document.getElementById("reproductorVoz").innerHTML = html
	});
 
 }
 
 function mostrarBoton(id_article) {
 
document.getElementById("reproductorVoz").innerHTML = '<source src="IMG/mp3/'.concat(id_article).concat('.mp3" type="audio/mpeg"> Your browser does not support the audio element.')
 
 }

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZsdWlkYm94LmpzIiwiaGVyby5qcyIsIm1lbnUuanMiLCJuYXZiYXIuanMiLCJzY3JvbGwuanMiLCJzY3JvbGxCb3guanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ3REQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUM3REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDL0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGZsdWlkQm94TW9kYWwgPSB7XG5cdGluaXQ6IGZ1bmN0aW9uICgpIHtcblxuXHQkKGZ1bmN0aW9uICgpIHtcblx0ICAgICQoJy5tb2RhbC1mb3RvcycpLmZsdWlkYm94KCk7XG5cdH0pO1xuXG5cdH1cbn07XG5cbmZsdWlkQm94TW9kYWwuaW5pdCgpOyIsInZhciBoZXJvID0ge1xuXHRpbml0OiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyICRzbGlkZXIgPSAkKCcuaXMtc2xpZGVyJyk7XG5cblx0XHRmdW5jdGlvbiBzbGlja2lmeSgpe1xuXHRcdCAgICAkc2xpZGVyLnNsaWNrKHtcblx0XHRcdFx0bW9iaWxlRmlyc3Q6dHJ1ZSxcblx0XHQgICAgICAgIHJlc3BvbnNpdmU6IFtcblx0XHQgICAgICAgICAgICB7XG5cdFx0ICAgICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDMwMCxcblx0XHQgICAgICAgICAgICAgICAgc2V0dGluZ3M6IFwidW5zbGlja1wiXG5cdFx0ICAgICAgICAgICAgfSxcblx0XHQgICAgICAgICAgICB7XG5cdFx0ICAgICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDEwMjUsXG5cdFx0ICAgICAgICAgICAgICAgIHNldHRpbmdzOiB7XG5cdFx0XHRcdFx0XHRcdHNsaWRlc1RvU2hvdzogMSxcblx0XHRcdFx0XHRcdFx0c2xpZGVzVG9TY3JvbGw6IDEsXHRcdCAgICBcdFxuXHRcdFx0XHRcdCAgICAgICAgYXV0b3BsYXk6IHRydWUsXG5cdFx0XHRcdFx0ICAgICAgICBhdXRvcGxheVNwZWVkOiA0MDAwLFxuXHRcdFx0XHRcdCAgICAgICAgLy8gZGVsYXk6IDEwMDAsXG5cdFx0XHRcdFx0ICAgICAgICBzcGVlZDogNzAwLFxuXHRcdFx0XHRcdCAgICAgICAgZG90czogZmFsc2UsXG5cdFx0XHRcdFx0ICAgICAgICBhcnJvd3M6IGZhbHNlLFxuXHRcdFx0XHRcdCAgICAgICAgZmFkZTogdHJ1ZSxcblx0XHRcdCAgXHRcdFx0XHRhc05hdkZvcjogJy50aHVtYnNfX25hdidcblx0XHRcdCAgXHRcdFx0fVxuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgIF1cblx0XHQgICAgfSk7XG5cdFx0ICAgICQoJy50aHVtYnNfX25hdicpLnNsaWNrKHtcblx0XHRcdCAgc2xpZGVzVG9TaG93OiAzLFxuXHRcdFx0ICBzbGlkZXNUb1Njcm9sbDogMSxcblx0XHRcdCAgYXNOYXZGb3I6ICcuaGVyby5pcy1zbGlkZXInLFxuXHRcdFx0ICBmb2N1c09uU2VsZWN0OiB0cnVlLFxuXHRcdFx0ICAvLyB2YXJpYWJsZVdpZHRoOiB0cnVlLFxuXHRcdFx0ICByZXNwb25zaXZlOiBbXG5cdFx0ICAgICAgICAgICAge1xuXHRcdCAgICAgICAgICAgICAgICBicmVha3BvaW50OiAxMDI1LFxuXHRcdCAgICAgICAgICAgICAgICBzZXR0aW5nczogXCJ1bnNsaWNrXCJcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICBdXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRzbGlja2lmeSgpO1xuXHRcdCQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKXtcblx0XHQgICAgdmFyICR3aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xuXHRcdCAgICBpZiAoJHdpbmRvd1dpZHRoID4gNzYwKSB7XG5cdFx0ICAgICAgICBzbGlja2lmeSgpO1xuXHRcdCAgICB9XG5cdFx0fSk7XG5cdH1cbn07XG5cbmhlcm8uaW5pdCgpOyIsInZhciB0b2dnbGVycyA9IHtcclxuXHQkYm9keTogJCgnYm9keScpLFxyXG5cdCRoZWFkZXI6ICQoJy5oZWFkZXInKSxcclxuXHQkdG9nZ2xlcjogJCgnLnRvZ2dsZXInKSxcclxuXHRcclxuXHRpbml0OiBmdW5jdGlvbiAoKSB7XHJcblx0XHR0aGlzLmJpbmRFdmVudHMoKTtcclxuXHR9LFxyXG5cclxuXHRiaW5kRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdHRoaXMuJHRvZ2dsZXIub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0XHQvLyBlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHNlbGYub25DbGlja2VkVG9nZ2xlcih0aGlzKTtcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdG9uQ2xpY2tlZFRvZ2dsZXI6IGZ1bmN0aW9uKGVsKSB7XHJcblx0XHRpZiAoJChlbCkuaGFzQ2xhc3MoJ2hlYWRlcl9fdG9nZ2xlJykgJiYgdGhpcy4kYm9keS5oYXNDbGFzcygnb3Blbi1tZW51JykpIHtcclxuXHRcdFx0dGhpcy5jbG9zZVNlY3Rpb24oKTtcclxuXHRcdH0gZWxzZSBpZiAoJChlbCkuaGFzQ2xhc3MoJ2dvLXRvJykgJiYgdGhpcy4kYm9keS5oYXNDbGFzcygnb3Blbi1tZW51JykpIHtcclxuXHRcdFx0XHR0aGlzLmNsb3NlU2VjdGlvbigpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dmFyIHNlY3Rpb24gPSAkKGVsKS5kYXRhKCdzaG93LXNlY3Rpb24nKTtcclxuXHRcdFx0dGhpcy5vcGVuU2VjdGlvbihzZWN0aW9uKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRvcGVuU2VjdGlvbjogZnVuY3Rpb24oZWwpIHtcclxuXHRcdHRoaXMuJGJvZHlcclxuXHRcdFx0LmFkZENsYXNzKCdvcGVuLW1lbnUnKVxyXG5cdFx0XHQudG9nZ2xlQ2xhc3MoJ2RhcmstbWVudScsICQoZWwpLmhhc0NsYXNzKCdkby1kYXJrLW1lbnUnKSk7XHJcblx0XHR0aGlzLiRoZWFkZXIuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG5cdFx0JChlbCkuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuXHR9LFxyXG5cclxuXHRjbG9zZVNlY3Rpb246IGZ1bmN0aW9uICgpIHtcclxuXHRcdHRoaXMuJGJvZHlcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCdvcGVuLW1lbnUnKVxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoJ2RhcmstbWVudScpO1xyXG5cdFx0dGhpcy4kaGVhZGVyLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcclxuXHRcdCQoJy5pcy1tZW51LmlzLXZpc2libGUnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG5cdH1cclxufTtcclxuXHJcbnZhciBmaXhNZW51ID0ge1xyXG5cdGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHQkKHdpbmRvdykuYmluZCgnc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xyXG5cdFx0ICAgIGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiA4MCkge1xyXG5cdFx0ICAgIFx0JCgnaGVhZGVyLmhlYWRlcicpLmFkZENsYXNzKCdmaXhlZCcpO1xyXG5cdFx0XHRcdCQoJy5tZW51LmlzLW1lbnUnKS5hZGRDbGFzcygnZml4ZWQnKTtcclxuXHRcdCAgICB9IGVsc2Uge1xyXG5cdFx0ICAgIFx0JCgnaGVhZGVyLmhlYWRlcicpLnJlbW92ZUNsYXNzKCdmaXhlZCcpO1xyXG5cdFx0ICAgIFx0JCgnLm1lbnUuaXMtbWVudScpLnJlbW92ZUNsYXNzKCdmaXhlZCcpO1xyXG5cdFx0ICAgIH1cclxuXHRcdH0pO1x0XHRcclxuXHR9XHJcbn07XHJcblxyXG5maXhNZW51LmluaXQoKTtcclxudG9nZ2xlcnMuaW5pdCgpOyIsInZhciBuYXZCYXIgPSB7XG5cdGluaXQ6IGZ1bmN0aW9uICgpIHtcblxuXHR2YXIgZWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcblx0XHRib2R5ID0gZG9jdW1lbnQuYm9keSxcblx0XHRzY3JvbGxUb3AgPSAnc2Nyb2xsVG9wJyxcblx0XHRzY3JvbGxIZWlnaHQgPSAnc2Nyb2xsSGVpZ2h0Jyxcblx0XHRwcm9ncmVzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1iYXInKSxcblx0XHRzY3JvbGw7XG5cblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24oKSB7XG5cdFx0c2Nyb2xsID0gKGVsZW1lbnRbc2Nyb2xsVG9wXXx8Ym9keVtzY3JvbGxUb3BdKSAvICgoZWxlbWVudFtzY3JvbGxIZWlnaHRdfHxib2R5W3Njcm9sbEhlaWdodF0pIC0gZWxlbWVudC5jbGllbnRIZWlnaHQpICogMTAwO1xuXHRcdHByb2dyZXNzLnN0eWxlLnNldFByb3BlcnR5KCctLXNjcm9sbCcsIHNjcm9sbCArICclJyk7XG5cdH0pOyBcblxuXHR9XG59O1xuXG5uYXZCYXIuaW5pdCgpOyIsInZhciBzY3JvbGxQYWdlID0ge1xuXHRpbml0OiBmdW5jdGlvbiAoKSB7XG5cblx0XHR2YXIgYXJyb3dzRG93biA9ICQoJy5zcGlwX25vdGUnKTtcblx0XHR2YXIgZ29Eb3duID0gJCgnLmdvLWRvd24nKTtcblxuXHRcdGFycm93c0Rvd24ub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0ICAgIC8vIE9uLXBhZ2UgbGlua3Ncblx0XHRcdGlmIChcblx0XHRcdFx0bG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXlxcLy8sICcnKSA9PSB0aGlzLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vLCAnJykgXG5cdFx0XHRcdCYmIFxuXHRcdFx0XHRsb2NhdGlvbi5ob3N0bmFtZSA9PSB0aGlzLmhvc3RuYW1lXG5cdFx0XHQpIHtcblx0XHRcdFx0Ly8gRmlndXJlIG91dCBlbGVtZW50IHRvIHNjcm9sbCB0b1xuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gJCh0aGlzLmhhc2gpO1xuXHRcdFx0XHR0YXJnZXQgPSB0YXJnZXQubGVuZ3RoID8gdGFyZ2V0IDogJCgnW25hbWU9JyArIHRoaXMuaGFzaC5zbGljZSgxKSArICddJyk7XG5cdFx0XHRcdC8vIERvZXMgYSBzY3JvbGwgdGFyZ2V0IGV4aXN0P1xuXHRcdFx0XHQvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRpZiAodGFyZ2V0Lmxlbmd0aCkge1xuXHRcdFx0XHR2YXIgdGFyZ2V0T2Zmc2V0ID0gdGFyZ2V0Lm9mZnNldCgpLnRvcCAtIDkwO1xuXHRcdFx0XHRcdC8vIE9ubHkgcHJldmVudCBkZWZhdWx0IGlmIGFuaW1hdGlvbiBpcyBhY3R1YWxseSBnb25uYSBoYXBwZW5cblx0XHRcdFx0XHQkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG5cdFx0XHRcdFx0XHRzY3JvbGxUb3A6IHRhcmdldE9mZnNldFxuXHRcdFx0XHRcdH0sIDgwMCwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHQvLyBDYWxsYmFjayBhZnRlciBhbmltYXRpb25cblx0XHRcdFx0XHRcdC8vIE11c3QgY2hhbmdlIGZvY3VzIVxuXHRcdFx0XHRcdFx0dmFyICR0YXJnZXQgPSAkKHRhcmdldCk7XG5cdFx0XHRcdFx0XHQvLyAkdGFyZ2V0LmZvY3VzKCk7XG5cdFx0XHRcdFx0XHRpZiAoJHRhcmdldC5pcyhcIjpmb2N1c1wiKSkgeyAvLyBDaGVja2luZyBpZiB0aGUgdGFyZ2V0IHdhcyBmb2N1c2VkXG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQkdGFyZ2V0LmF0dHIoJ3RhYmluZGV4JywnLTEnKTsgLy8gQWRkaW5nIHRhYmluZGV4IGZvciBlbGVtZW50cyBub3QgZm9jdXNhYmxlXG5cdFx0XHRcdFx0XHQvLyAkdGFyZ2V0LmZvY3VzKCk7IC8vIFNldCBmb2N1cyBhZ2FpblxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRnb0Rvd24ub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0ICAgIC8vIE9uLXBhZ2UgbGlua3Ncblx0XHRcdGlmIChcblx0XHRcdFx0bG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXlxcLy8sICcnKSA9PSB0aGlzLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vLCAnJykgXG5cdFx0XHRcdCYmIFxuXHRcdFx0XHRsb2NhdGlvbi5ob3N0bmFtZSA9PSB0aGlzLmhvc3RuYW1lXG5cdFx0XHQpIHtcblx0XHRcdFx0Ly8gRmlndXJlIG91dCBlbGVtZW50IHRvIHNjcm9sbCB0b1xuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gJCh0aGlzLmhhc2gpO1xuXHRcdFx0XHR0YXJnZXQgPSB0YXJnZXQubGVuZ3RoID8gdGFyZ2V0IDogJCgnW25hbWU9JyArIHRoaXMuaGFzaC5zbGljZSgxKSArICddJyk7XG5cdFx0XHRcdC8vIERvZXMgYSBzY3JvbGwgdGFyZ2V0IGV4aXN0P1xuXHRcdFx0XHQvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRpZiAodGFyZ2V0Lmxlbmd0aCkge1xuXHRcdFx0XHR2YXIgdGFyZ2V0T2Zmc2V0ID0gdGFyZ2V0Lm9mZnNldCgpLnRvcDtcblx0XHRcdFx0XHQvLyBPbmx5IHByZXZlbnQgZGVmYXVsdCBpZiBhbmltYXRpb24gaXMgYWN0dWFsbHkgZ29ubmEgaGFwcGVuXG5cdFx0XHRcdFx0JCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuXHRcdFx0XHRcdFx0c2Nyb2xsVG9wOiB0YXJnZXRPZmZzZXRcblx0XHRcdFx0XHR9LCA4MDAsIGZ1bmN0aW9uKCkge30pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XHRcdFxuXHR9XG59O1xuXG5zY3JvbGxQYWdlLmluaXQoKTsiLCJ2YXIgc2Nyb2xsQm94ID0ge1xuXHRpbml0OiBmdW5jdGlvbiAoKSB7XG5cblx0XHQoZnVuY3Rpb24oJCkge1xuXG5cdFx0LyoqXG5cdFx0KiBDb3B5cmlnaHQgMjAxMiwgRGlnaXRhbCBGdXNpb25cblx0XHQqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblx0XHQqIGh0dHA6Ly90ZWFtZGYuY29tL2pxdWVyeS1wbHVnaW5zL2xpY2Vuc2UvXG5cdFx0KlxuXHRcdCogQGF1dGhvciBTYW0gU2VobmVydFxuXHRcdCogQGRlc2MgQSBzbWFsbCBwbHVnaW4gdGhhdCBjaGVja3Mgd2hldGhlciBlbGVtZW50cyBhcmUgd2l0aGluXG5cdFx0KiAgICAgdGhlIHVzZXIgdmlzaWJsZSB2aWV3cG9ydCBvZiBhIHdlYiBicm93c2VyLlxuXHRcdCogICAgIG9ubHkgYWNjb3VudHMgZm9yIHZlcnRpY2FsIHBvc2l0aW9uLCBub3QgaG9yaXpvbnRhbC5cblx0XHQqL1xuXG5cdFx0JC5mbi52aXNpYmxlID0gZnVuY3Rpb24ocGFydGlhbCkge1xuXG5cdFx0XHR2YXIgJHQgICAgICAgICAgICA9ICQodGhpcyksXG5cdFx0XHRcdCR3ICAgICAgICAgICAgPSAkKHdpbmRvdyksXG5cdFx0XHRcdHZpZXdUb3AgICAgICAgPSAkdy5zY3JvbGxUb3AoKSxcblx0XHRcdFx0dmlld0JvdHRvbSAgICA9IHZpZXdUb3AgKyAkdy5oZWlnaHQoKSxcblx0XHRcdFx0X3RvcCAgICAgICAgICA9ICR0Lm9mZnNldCgpLnRvcCxcblx0XHRcdFx0X2JvdHRvbSAgICAgICA9IF90b3AgKyAkdC5oZWlnaHQoKSxcblx0XHRcdFx0Y29tcGFyZVRvcCAgICA9IHBhcnRpYWwgPT09IHRydWUgPyBfYm90dG9tIDogX3RvcCxcblx0XHRcdFx0Y29tcGFyZUJvdHRvbSA9IHBhcnRpYWwgPT09IHRydWUgPyBfdG9wIDogX2JvdHRvbTtcblxuXHRcdFx0cmV0dXJuICgoY29tcGFyZUJvdHRvbSA8PSB2aWV3Qm90dG9tKSAmJiAoY29tcGFyZVRvcCA+PSB2aWV3VG9wKSk7XG5cblx0XHR9O1xuXG5cdFx0fSkoalF1ZXJ5KTtcblxuXHRcdHZhciB3aW4gPSAkKHdpbmRvdyk7XG5cblx0XHR2YXIgYWxsTW9kcyA9ICQoXCIuc2Nyb2xsYm94XCIpO1xuXG5cdFx0YWxsTW9kcy5lYWNoKGZ1bmN0aW9uKGksIGVsKSB7XG5cdFx0XHR2YXIgZWwgPSAkKGVsKTtcblx0XHRcdGlmIChlbC52aXNpYmxlKHRydWUpKSB7XG5cdFx0XHRcdGVsLmFkZENsYXNzKFwiYWxyZWFkeS12aXNpYmxlXCIpOyBcblx0XHRcdH0gXG5cdFx0fSk7XG5cblx0XHQvLyB2YXIgJHdhaXRsaXN0ID0gJCgnLm9uLXdhaXRsaXN0Jyk7ICAgIFxuXHRcdC8vICQod2luZG93KS5vbihcInNjcm9sbCByZXNpemVcIiwgZnVuY3Rpb24oZXZlbnQpIHtcblx0XHQvLyBcdCR3YWl0bGlzdC5lYWNoKGZ1bmN0aW9uKGksIGVsKSB7XG5cdFx0Ly8gXHRcdHZhciAkZWwgPSAkd2FpdGxpc3QuZXEoaSk7XG5cdFx0Ly8gXHRcdGlmICgkZWwudmlzaWJsZSh0cnVlKSkge1xuXHRcdC8vIFx0XHRcdCR3YWl0bGlzdFxuXHRcdC8vIFx0XHRcdC5zcGxpY2UoaSwgMSk7XG5cdFx0Ly8gXHRcdFx0JGVsXG5cdFx0Ly8gXHRcdFx0LmFkZENsYXNzKFwiY29tZS1pblwiKVxuXHRcdC8vIFx0XHRcdC5yZW1vdmVDbGFzcygnb24td2FpdGxpc3QnKTtcblx0XHQvLyBcdFx0fSBcblx0XHQvLyBcdH0pO1xuXHRcdC8vIH0pO1xuXG5cdFx0d2luLnNjcm9sbChmdW5jdGlvbihldmVudCkge1xuXG5cdFx0XHRhbGxNb2RzLmVhY2goZnVuY3Rpb24oaSwgZWwpIHtcblx0XHRcdFx0dmFyIGVsID0gJChlbCk7XG5cdFx0XHRcdGlmIChlbC52aXNpYmxlKHRydWUpKSB7XG5cdFx0XHRcdFx0ZWwuYWRkQ2xhc3MoXCJjb21lLWluXCIpOyBcblx0XHRcdFx0fSBcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxufTtcblxuc2Nyb2xsQm94LmluaXQoKTsiXX0=
